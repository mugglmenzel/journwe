@(categories: List[models.helpers.CategoryCount])

<div class="row-fluid">
    <div class="span2 offset1">
        <div style="min-height: 185">
            <a href="#" onclick="switchMode();"><img id="yingyangyong" src='@routes.Assets.at("img/yingyangyong_green.png")'></a>
        </div>

        <div class="spacer30"></div>
        <a href="@routes.AdventureController.create()" class="btn btn-large">Start Adventure</a>
    </div>
    <!--<a href="@routes.AdventureController.create()" class="btn btn-primary btn-large text-center">Start
        a new Group Adventure!</a> -->
    <div class="span8" style="min-height: 800px">
        <div class="input-append">
            <input type="text" placeholder="Name your adventure" required="required" class="input input-xxl">

            <div class="btn-group">
                <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                    Choose Category
                    <span class="caret"></span>
                </a>
                <ul class="dropdown-menu">
                    @for(cat <- categories) {
                    <li><a><span
                            class="badge badge-info pull-right">@cat.getCount()</span>@cat.getCategory().getName()</a>
                    </li>
                    }
                </ul>
            </div>
        </div>

        <div id="where-dialog" style="border: solid 5px #78a942; padding: 10px; margin-bottom: 20px">
            <h1>Where do you want to go?</h1>

            <ul id="places-list"></ul>

            <div class="input-append">
                <input type="text" placeholder="A decent place name" id="inputPlace" onchange="searchPlace();">
                <button class="btn btn-primary"><i class="icon-plus"></i></button>
            </div>
            <div style="height: 500px;">
                <div id="where-map" style="width: 100%; height: 100%"></div>
            </div>
        </div>

        <div id="who-dialog" style="border: solid 5px #eb3d00; padding: 10px; margin-bottom: 20px; display: none;">
            <h1>Who's gonna join your adventure?</h1>

            <ul id="people-list"></ul>

            <div class="input-append">
                <div class="btn-group">
                    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#">
                        <i class="icon-group"></i>
                        <span class="caret"></span>
                    </a>
                    <ul class="dropdown-menu">
                        <li><i class="icon-facebook"></i> Facebook</li>
                        <li><i class="icon-envelope"></i> Email</li>
                    </ul>
                </div>
                <input type="text" placeholder="A good ol' friend" id="inputPeople">
                <button class="btn btn-primary"><i class="icon-plus"></i></button>
            </div>
            <div>Is your Adventure public?
                <div class="switch"><input type="checkbox" id="publish" name="publish" value="true"></div>
            </div>
        </div>

        <div id="when-dialog" style="border: solid 5px #00d1fb; padding: 10px; margin-bottom: 20px; display: none;">
            <h1>When do you want to go?</h1>
        </div>
    </div>

</div>

<script>
    function switchMode() {
    switch ($('#yingyangyong').attr('src')) {
    case '@routes.Assets.at("img/yingyangyong_green.png")':
    $('#yingyangyong').fadeOut(800, function(){
    $('#yingyangyong').attr('src', '@routes.Assets.at("img/yingyangyong_red.png")');
    $('#yingyangyong').fadeIn(800);});
    showDialog('who-dialog');
    break;
    case '@routes.Assets.at("img/yingyangyong_blue.png")':
    $('#yingyangyong').fadeOut(800, function(){
    $('#yingyangyong').attr('src', '@routes.Assets.at("img/yingyangyong_green.png")');
    $('#yingyangyong').fadeIn(800);
    });
    showDialog('where-dialog');
    break;
    case '@routes.Assets.at("img/yingyangyong_red.png")':
    $('#yingyangyong').fadeOut(800, function(){
    $('#yingyangyong').load(function() { $('#yingyangyong').fadeIn(800); });
    $('#yingyangyong').attr('src', '@routes.Assets.at("img/yingyangyong_blue.png")');
    });
    showDialog('when-dialog');
    break;
    }
    }

    function showDialog(dialog) {
    var dialogs = { 'where-dialog' : 'when-dialog',
    'when-dialog': 'who-dialog',
    'who-dialog': 'where-dialog' };
    $('#' + dialogs[dialog]).fadeOut(800, function () {$('#' + dialog).fadeIn(800);});
    }
</script>
<script src="https://maps.googleapis.com/maps/api/js?sensor=false&key=AIzaSyAbYnwpdOgqWhspiETgFdlXyX3H2Fjb8fY"></script>
<script>

    var map;
    google.maps.visualRefresh = true;

    function initialize() {
    var mapOptions = {
    zoom: 19,
    center: new google.maps.LatLng(52.467541, 13.324957),
    mapTypeId: google.maps.MapTypeId.SATELLITE
    };
    map = new google.maps.Map(document.getElementById('where-map'),
    mapOptions);
    }

    google.maps.event.addDomListener(window, 'load', initialize);


    var bounds = new google.maps.LatLngBounds();

    function searchPlace() {
    new google.maps.Geocoder().geocode({'address': $('#inputPlace').val()}, function (results, status) {
    $('#places-list').append('<li>' + results[0].formatted_address + '</li>');
    map.setCenter(results[0].geometry.location);
    var marker = new google.maps.Marker({
    map: map,
    position: results[0].geometry.location
    });
    bounds.extend(results[0].geometry.location);
    map.fitBounds(bounds);
    });
    }
</script>
<script>
    function addFriend() {
    $('#people-list').append('<li>' + $('#inputPeople').val() + '</li>');
    }
</script>
