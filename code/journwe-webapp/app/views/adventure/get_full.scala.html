@(adv: models.adventure.Adventure, ins: models.inspiration.Inspiration, advr: models.adventure.adventurer.Adventurer, user: models.user.User, active: String)(description: Html)

@import models.authorization.JournweAuthorization

@import play.libs.Json

@import views.html.adventure.section._

@scripts = {
    <script type="text/javascript">
    define("adventureData", [ ], @{
        Html(Json.toJson(adv).toString())
    });
    define("adventurerData", [ ], @{
        Html(Json.toJson(advr).toString())
    });
    </script>
}

@main(adv.getName()) { } {

    <div class="container content">

        @defining(new JournweAuthorization(adv.getId)) { auth =>

            <div class="prime-image">
                <div id="adventure-prime-image" style="width: 100%; height: 100px; background: url('http://www.placehold.it/1250x100/AAAAAA/EFEFEF&text=Drop+image') no-repeat center center transparent; background-size: auto 100%;">
                </div>


                <div class="title-overlay">
                    <div class="container-fluid">
                        <div class="pull-left">
                            <ul class="nav nav-pills">
                                <li><a><i class="fa fa-info"></i></a></li>
                                <li><a><i class="fa fa-group"></i></a></li>
                                <li><a><i class="fa fa-map-marker"></i></a></li>
                                <li><a><i class="fa fa-calendar"></i></a></li>
                            </ul>
                        </div>
                         <div class="pull-right">
                             <ul class="nav nav-pills">
                                 <li><a><i class="fa fa-print"></i></a></li>
                                 <li><a><i class="fa fa-sliders"></i></a></li>
                             </ul>
                         </div>

                    </div>
                </div>
            </div>

            <div class="adventure-container container-fluid">
                @comment.commentsCommon()



                <div class="row">
                    <div class="adventure-container-left col-lg-9" style="padding: 0 10px 0 10px;">


                        <div class="panel panel-info">
                            <div class="panel-heading">
                                <h1 class="panel-title">
                                    <strong>
                                        <a href="#" class="editable" data-type="text" data-name="adventureName" data-pk="@adv.getId()"
                                        data-url="@html.routes.AdventureController.saveEditable()"
                                        data-original-title="Enter adventure name" data-inputclass="form-control ">@adv.getName()</a></strong><i class="fa fa-pencil muted"></i> <span></span>
                                    @if(ins != null) {<small>- <a href="@html.routes.InspirationController.get(ins.getId)">@ins.getName()</a></small>}
                                </h1>
                            </div>
                            <div class="panel-body">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <p class="lead">You are in this JournWe&#8482; to <span class="places-favorite-place-name">?</span> on <span class="times-favorite-time-name">?</span>. Have some fun, guys!</p>
                                    </div>
                                </div>
                                <div class="row">
                                    <ol class="breadcrumb">
                                        <li><strong>Dream</strong></li>
                                        <li>Discuss</li>
                                        <li>Settle</li>
                                        <li>Book</li>
                                    </ol>
                                </div>
                                <div class="row">
                                    <div class="col-xs-4 text-warning"><i class="fa fa-map-marker fa-fw icon-description"></i> 0 place options added <i class="fa fa-warning"></i></div>
                                    <div class="col-xs-4 text-success"><i class="fa fa-calendar fa-fw icon-description"></i> 3 date options added <i class="fa fa-check"></i></div>
                                    <div class="col-xs-4"><i class="fa fa-group fa-fw icon-description"></i> 0 people invited</div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-4"><i class="fa fa-map-marker fa-fw icon-description"></i> <span class="places-favorite-place-name">?</span> <a href="#" class="btn btn-link">Reopen</a></div>
                                    <div class="col-xs-4"><i class="fa fa-calendar fa-fw icon-description"></i> <span class="times-favorite-time-name">?</span> <a href="#" class="btn btn-link">Reopen</a></div>
                                    <div class="col-xs-4"><i class="fa fa-group fa-fw icon-description"></i> ? Participants</div>
                                </div>
                                <div class="row">
                                    <div class="col-xs-1"><i class="fa fa-picture-o fa-fw icon-description"></i></div>
                                    <div class="col-xs-11">
                                        <div>
                                            <div class="adventure-photos"></div>
                                            <div class="polaroid col-md-2">
                                                <a class="btn-photo-upload"><img style="margin: 0px; width: 100%;" src="http://www.placehold.it/150x150/EFEFEF/AAAAAA&text=add+photo"></a>
                                                <input id="adventure-photo-file-input" type="file" class="hide"/>
                                            </div>
                                        </div>
                                        <div class="loader loader-photos stash"></div>

                                        <script type="text/x-tmpl" id="adventure-photo-template">
                                            <div class="polaroid col-md-2">
                                                <a class="btn-adventure-photo" data-index='{%=o.index%}'>
                                                    <img style="margin: 0px; width: 100%;" src="{% if(o == null || o.url == null) { %}{%=String('http://www.placehold.it/150x150/EFEFEF/AAAAAA&text=no+image')%}{% } else { %}{%=String('http://www.journwe.com/thumbnail?w=150&h=150&u=' + o.url)%}{% } %}">
                                                </a>
                                                <div style="background-color: rgba(255,255,255,0.6); position: absolute; bottom: 0px; left: 0px; right: 0px; padding: 2px;">
                                                    <button class="btn btn-default btn-photo-delete pull-right" data-id="{%=o.id%}"><i class="fa fa-trash-o"></i></button>
                                                </div>
                                            </div>
                                        </script>
                                        <div id="carousel-adventure-photos" class="carousel carousel-fullscreen slide modal fade">
                                            <div class="text-center" style="position: absolute; top: 0; width: 100%; z-index: 9999;"><em>Click</em> to exit</div>
                                            <ol class="carousel-indicators carousel-indicators-adventure-photos"></ol>
                                            <div class="carousel-inner carousel-inner-adventure-photos"></div>

                                            <a class="left carousel-control" href="#carousel-adventure-photos" data-slide="prev">
                                                <span class="glyphicon glyphicon-chevron-left"></span>
                                            </a>
                                            <a class="right carousel-control" href="#carousel-adventure-photos" data-slide="next">
                                                <span class="glyphicon glyphicon-chevron-right"></span>
                                            </a>
                                        </div>
                                        <script type="text/x-tmpl" id="adventure-photo-carousel-indicator-template">
                                            <li class="{%=o.active%}" data-target="#carousel-adventure-photos" data-slide-to="{%=o.index%}"></li>
                                        </script>
                                        <script type="text/x-tmpl" id="adventure-photo-carousel-item-template">
                                            <div class="item {%=o.active%}" style="background-image: url('{% if(o == null || o.url == null) { %}{%=String('http://www.placehold.it/1600x1200/EFEFEF/AAAAAA&text=no+image')%}{% } else { %}{%=String('http://www.journwe.com/thumbnail?w=1600&h=1200&u=' + o.url)%}{% } %}')"></div>
                                        </script>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-footer">
                                <div class="row">
                                    <div class="col-xs-6"><a href="@adv.getShortURL"><i class="fa fa-globe"></i> @adv.getShortURL</a></div>
                                    <div class="col-xs-6"><a href="mailto:@adv.getId@@journwe.com"><i class="fa fa-envelope"></i> @adv.getId@@journwe.com</a></div>
                                </div>
                            </div>
                        </div>

                            @*
                        <div class="jrn-container">
                            @index(adv, ins)
                        </div>
                           *@


                        @if(auth.canViewAdventureAdventurersWidget()) {
                        <div class="jrn-adventure-section" id="adventurers">
                             <div class="jrn-container jrn-no-bottom-round jrn-collapsed">

                                <h2><i class="fa fa-group icon-for-adventure-title"></i> @Messages("adventure.getScala.adventurers.title")
                                    <div class="pull-right clearfix">
                                        <button class="btn btn-default btn-nav-section-collapse-toggle"><i class="fa fa-caret-down"></i></button>
                                    </div>
                                </h2>
                                <div class="row collapsable stash">
                                    <div class="col-lg-12">
                                        <p class="lead">@Messages("adventure.getScala.adventurers.subtitle")</p>
                                        @adventurers(adv, advr)
                                    </div>
                                </div>
                            </div>
                            @if(auth.canViewAdventurerComments()) {
                                <div class="collapsable stash">
                                @comment.widget_comment(adv.getId + "_adventurers", user)
                                </div>
                            }
                        </div>
                        }

                        @if(auth.canViewAdventurePlacesWidget()) {
                        <div class="jrn-adventure-section" id="places">
                            <div class="jrn-container jrn-no-bottom-round jrn-collapsed">
                                <h2><i class="fa fa-globe icon-for-adventure-title"></i> @Messages("adventure.getScala.place.title")
                                    <div class="pull-right clearfix">
                                        <button class="btn btn-default btn-nav-section-collapse-toggle"><i class="fa fa-caret-down"></i></button>
                                    </div>
                                </h2>
                                <div class="row collapsable stash">
                                    <div class="col-lg-12">
                                        <p class="lead">@Messages("adventure.getScala.place.subtitle")</p>

                                        @places(adv)

                                    </div>
                                </div>
                            </div>
                            @if(auth.canViewPlaceComments()) {
                                <div class="collapsable stash">
                                @comment.widget_comment(adv.getId + "_places", user)
                                </div>
                            }
                        </div>
                        }

                        @if(auth.canViewAdventureTimeWidget()) {
                        <div class="jrn-adventure-section" id="times">
                            <div class="jrn-container jrn-no-bottom-round jrn-collapsed">
                                <h2><i class="fa fa-calendar icon-for-adventure-title"></i> @Messages("adventure.getScala.time.title")
                                    <div class="pull-right clearfix">
                                        <button class="btn btn-default btn-nav-section-collapse-toggle"><i class="fa fa-caret-down"></i></button>
                                    </div>
                                </h2>
                                <div class="row collapsable stash">
                                    <div class="col-lg-12">
                                        <p class="lead">@Messages("adventure.getScala.time.subtitle")</p>

                                        @times(adv)

                                    </div>
                                </div>
                            </div>
                            @if(auth.canViewDateAndTimeComments()) {
                                <div class="collapsable stash">
                                @comment.widget_comment(adv.getId + "_times", user)
                                </div>
                            }
                       </div>
                        }


                        @if(auth.canViewAdventureTodoWidget()) {
                        <div class="jrn-adventure-section" id="todos">
                            <div class="jrn-container jrn-no-bottom-round jrn-collapsed">
                                <h2><i class="fa fa-list-ol fa fa-for-adventure-title"></i> @Messages("adventure.getScala.todo.title")
                                    <div class="btn-toolbar pull-right">
                                        <button id="todos-button-refresh" class="btn btn-success"><i class="fa fa-refresh"></i></button>
                                        <button class="btn btn-default btn-nav-section-collapse-toggle"><i class="fa fa-caret-down"></i></button>
                                    </div>
                                </h2>
                                <div class="row collapsable stash">
                                    <div class="col-lg-12">
                                        <p class="lead">@Messages("adventure.getScala.todo.subtitle")</p>

                                        @todos(adv, advr)

                                    </div>
                                </div>
                            </div>
                            @if(auth.canViewTodoComments()) {
                                <div class="collapsable stash">
                                @comment.widget_comment(adv.getId + "_todos", user)
                                </div>
                            }
                        </div>
                        }

                        @*
                        @if(auth.canViewAdventureFilesWidget() && false) {

                            <div class="jrn-container jrn-no-bottom-round">
                                <h2 id="files"><i class="fa fa-file fa fa-for-adventure-title"></i> @Messages("adventure.getScala.files.title")<div class="pull-right"><button class="btn btn-success btn-files-refresh"><i class="fa fa-refresh"></i></button></div></h2>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <p class="lead">@Messages("adventure.getScala.files.subtitle")</p>

                                        @files(adv)

                                    </div>
                                </div>
                            </div>
                            <div style="position: relative; display: block; padding-right: 20px; background: white; margin: 1px 0;">
                                <div class="row"><small class="pull-right"><a href="http://www.entouragebox.com" target="_blank"><img src="http://www.entouragebox.com/img/logo.png" style="max-height: 30px;"></a></small></div>
                            </div>
                            @if(auth.canViewFilesComments()) {
                                @comment.widget_comment(adv.getId + "_files", user)
                            }
                            <hr/>

                        }
                        *@

                    <div class="jrn-container jrn-actions">
                        <h2><i class="fa fa-wrench"></i> Actions</h2>
                        @options(adv, advr)
                    </div>
                </div>
                <div class="adventure-container-right col-lg-3">
                    @if(auth.canViewAdventureDiscussionWidget()) {
                        @*
                        <div class="jrn-adventure-section stash">
                        <div class="jrn-container">

                        <h2 id="discussion-wall"><i class="fa fa-comments fa fa-for-adventure-title"></i> @Messages("adventure.getScala.discussion.title")</h2>
                        <div class="row">
                        <div class="col-lg-12">
                        @comment.widget_wall(adv.getId + "_discussion")
                        </div>
                        </div>
                        </div>

                        <hr/>
                        </div>

                        <div class="jrn-adventure-section stash">
                        <div class="jrn-container">
                        <h2 id="emails"><i class="fa fa-envelope icon-for-adventure-title"></i>
                        Emails<div class="pull-right"><button class="btn btn-success btn-emails-refresh"><i class="fa fa-refresh"></i></button></div></h2>
                        <div class="row">
                        <div class="col-lg-12">
                        <p class="lead">
                        Eure eigene Emailadresse für dieses JournWe! Sendet und empfangt Emails gemeinsam.</p>

                        @emails(adv)

                        </div>
                        </div>
                        </div>
                        </div>
                        *@

                        <div class="discussion-container" id="discussion">
                            <h4><i class="fa fa-comments-o icon-for-adventure-title"></i>
                                Discussion, Emails &amp; Files

                                <div class="pull-right clearfix">
                                    <div class="btn-toolbar pull-right">
                                        <button class="btn btn-success btn-timeline-refresh btn-emails-refresh btn-files-refresh"><i class="fa fa-refresh"></i></button>
                                    </div>
                                    <ul class="nav nav-pills nav-discussion pull-right">
                                        <li class="active"><a class="btn btn-default btn-timeline-filter-comments" href="#discussion-timeline" data-toggle="tab" title="Discussion"><i class="fa fa-comments-o fa-fw"></i></a></li>
                                        <li><a class="btn btn-default" href="#discussion-emails" data-toggle="tab" title="Emails"><i class="fa fa-envelope-o fa-fw"></i></a></li>
                                        <li><a class="btn btn-default" href="#discussion-files" data-toggle="tab" title="Files"><i class="fa fa-file-o"></i></a></li>
                                        <li><a class="btn btn-default btn-timeline-filter-logs" href="#discussion-timeline" data-toggle="tab" title="Changes"><i class="fa fa-list fa-fw"></i></a></li>
                                        @*
                                        <li class="active"><a class="btn btn-default btn-timeline-filter-all" href="#discussion-timeline" data-toggle="tab" title="Timeline"><i class="fa fa-comments-o fa-fw"></i></a></li>
                                        *@
                                    </ul>
                                </div>
                            </h4>
                            <div class="row">
                                <div class="col-lg-12">
                                @timeline(adv, user)
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>

            @*
            @if(auth.canViewAdventureOffersWidget()) {
            <div class="jrn-container jrn-no-bottom-round">
            <h2 id="offers"><i class="fa fa-suitcase icon-for-adventure-title"></i> @Messages("adventure.getScala.offers.title")</h2>
            <div class="row">
            <div class="col-lg-12">
            <p class="lead">@Messages("adventure.getScala.offers.subtitle")</p>

            <table class="table table-striped table-hover">
            <thead>
            <tr><th>Time Option</th><th>Place Option</th><th><i class="fa fa-plane"></i> Cheap Flights</th><th><i class="fa fa-building"></i> Cheap Hotels</th></tr>
            </thead>
            <tbody>
            <tr><td>13.9.2013 - 19.9.2013</td><td>Berlin, Deutschland</td><td>LH 419, FRA - BER</td><td>NH Hotel Berlin City West</td></tr>
            </tbody>
            </table>

            </div>
            </div>
            </div>
            @if(auth.canViewOfferComments()) {
            @comment.widget_comment(adv.getId + "offers", user)
            }
            }
            *@
            @*
            <div class="nav-container">
                <div class="nav-adventure">
                    <div class="container">
                        <div class="nav-title pull-left"><strong>Actions</strong></div>
                        <ul id="nav-adventure-list" class="nav nav-pills nav-adventure-list">
                            @if(auth.canViewAdventureDiscussionWidget()) {
                                <li class="discussion emails">
                                    <a href="#discussion" data-toggle="tooltip" data-placement="top" title="Join the Discussion, Check Emails &amp; Files"><i class="fa fa-comments-o" title="Discussion"></i></a>
                                        <!--a href="#emails" data-toggle="tooltip" title="Emails"><i class="fa fa-envelope" title="Emails"></i></a-->
                                </li>
                            }
                            @if(auth.canViewAdventureAdventurersWidget()) {
                                <li class="adventurers">
                                    <a href="#adventurers" data-toggle="tooltip" data-placement="top" title="Invite Friends"><i class="fa fa-group" title="Adventurers"></i></a>
                                </li>
                            }
                            @if(auth.canViewAdventurePlacesWidget()) {
                                <li class="places">
                                    <a href="#places" data-toggle="tooltip" data-placement="top" title="Vote for Places"><i class="fa fa-globe" title="Place"></i></a>
                                </li>
                            }
                            @if(auth.canViewAdventureTimeWidget()) {
                                <li class="times">
                                    <a href="#times" data-toggle="tooltip" data-placement="top" title="Vote for Times"><i class="fa fa-calendar" title="Date &amp; Time"></i></a>
                                </li>
                            }
                            @if(auth.canViewAdventureTodoWidget()) {
                                <li class="todos files">
                                    <a href="#todos" data-toggle="tooltip" data-placement="top" title="Check your Todos"><i class="fa fa-list-ol" title="Todos"></i></a>
                                        <!--a href="#files" data-toggle="tooltip" title="Files"><i class="fa fa-file" title="Files"></i></a-->
                                </li>
                            }
                            <li class="offers"><a href="#offers"><i class="fa fa-suitcase" title="Offers"></i></a></li>
                        </ul>
                    </div>
                </div>
            </div>
            *@
        }


        <div id="amazon-affiliate" class="modal fade in" tabindex="-1" role="dialog" style="color : black ;">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h3 class="modal-title"> @Messages("adventure.todos.amazon.title") </h3>
                    </div>
                    <div class="modal-body"><div class="affiliate-loading loader"></div> <ul class="content media-list"></ul></div>
                    <div class="modal-footer">
                        <button class="btn btn-default" data-dismiss="modal">@Messages("adventure.general.button.close")</button>
                    </div>
                </div>
            </div>
        </div>

        @cloneAdventure(adv, new DynamicForm())

        @createPDF(adv, new DynamicForm())


        <div id="upload-progress" class="modal fade in" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title"><i class="fa fa-cloud-upload"></i> Uploading</h3>
                    </div>
                    <div class="modal-body">
                        <div class="progress progress-striped active">
                            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <small class="pull-right"><a href="http://www.entouragebox.com" target="_blank"><img src="http://www.entouragebox.com/img/logo.png" style="max-height: 30px;"></a></small>
                    </div>
                </div>
            </div>
        </div>

        <div id="email-modal" class="modal fade in" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title"><i class="fa fa-envelope-o"></i> <span class="email-title"></span></h3>
                    </div>
                    <div class="modal-body"><pre><span class="email-body"></span></pre></div>
                    <div class="modal-footer">
                        <a class="btn btn-default" data-dismiss="modal">@Messages("adventure.general.button.close")</a>
                    </div>
                </div>
            </div>
        </div>

        <div id="leave" class="modal fade in" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title"><i class="fa fa-unlink"></i> @Messages("adventure.general.leaveconfirm") @adv.getName()
                            ?</h3>
                    </div>
                    <div class="modal-body"><p class="lead">@Messages("adventure.general.leaveconfirm") @adv.getName()
                        ?</p></div>
                    <div class="modal-footer">
                        <a class="btn btn-danger" href="@html.routes.AdventurePeopleController.leave(adv.getId())">@Messages("adventure.general.button.leave")</a>
                        <a class="btn btn-default" data-dismiss="modal">@Messages("adventure.general.button.cancel")</a>
                    </div>
                </div>
            </div>
        </div>

    </div>
</div>

}(openGraphMeta("JournWe " + adv.getName, adv.getShortURL, "Join" + " " + adv.getName + ". " + adv.getDescription, adv.getImage), "adventure", scripts)
