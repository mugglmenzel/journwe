@(adv: models.adventure.Adventure)

@import models.authorization.JournweAuthorization

    @defining(new JournweAuthorization(adv.getId)){ auth =>

@if(auth.canViewAndDownloadFiles()) {
    <script type="text/x-tmpl" id="files-template">
        <tr data-id="{%=o.file.fileName%}">
            <td><a class="btn btn-link" href="{%=o.file.url%}" target="_blank"><i class="fa fa-file"></i> {%=o.file.fileName%}</a></td>
            <td><span class="label label-info" title="{%=o.user.name%}">{%=String(o.user.name).split(/\s/)[0]%}</span></td>
            <td class="text-center"><button class="btn btn-primary" href="{%=o.file.url%}" target="_blank"><i class="fa fa-cloud-download"></i></button> <button class="btn btn-file-delete btn-danger"><i class="fa fa-trash-o"></i></button></td>
        </tr>
    </script>

    <table id="files-list" class="table table-striped table-hover table-condensed stash">
        <thead>
            <tr>
                <th>@Messages("adventure.files.fileName")</th>
                <th>@Messages("adventure.files.uploadedBy")</th>
                <!--<th>@Messages("adventure.files.downloadBy")</th>-->
                <th class="text-center">@Messages("adventure.general.listactions")</th>
            </tr>
        </thead>
        <tbody>

        </tbody>
    </table>

}

@if(auth.canUploadFiles()) {
    <div id="files-upload-dropzone" ondragleave="$('#files-upload-dropzone').removeClass('hover'); return false;" ondragenter="$('#files-upload-dropzone').addClass('hover'); return false;">
        <div class="text-center">
            <p class="lead">@Messages("adventure.files.fileDrop")
                <input id="files-file-input" type="file" class="hide"/><button class="btn btn-file-upload"><i class="fa fa-cloud-upload"></i> @Messages("adventure.files.fileUpload")</button>
            </p>
        </div>
    </div>
}
    }
