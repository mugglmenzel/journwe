@(adv: models.adventure.Adventure, ins: models.inspiration.Inspiration, advr: models.adventure.adventurer.Adventurer, user: models.user.User, active: String)(description: Html)

@import models.authorization.JournweAuthorization

@import play.libs.Json

@import views.html.adventure.section._


    @main(adv.getName()) { } {

        @defining(new JournweAuthorization(adv.getId)) { auth =>
            <div id="adventure-container">
                @comment.commentsCommon()

                <div class="nav-adventure row">
                        <!--<h4 class="text-right" style="font-size: 14px; line-height: 1; color: #aaaaaa;">GOTO</h4> -->
                        <div class="col-xs-6 title-name">
                            <i class="fa fa-info"></i>
                            <a href="#" id="adventureName" data-type="text" data-pk="@adv.getId()"
                            data-url="@html.routes.AdventureController.saveEditable()"
                            data-original-title="Enter adventure name" data-inputclass="form-control input-lg">@adv.getName()</a><i class="fa fa-pencil muted"></i> <span></span>
                            @if(ins != null) {<small>- <a href="@html.routes.InspirationController.get(ins.getId)">@ins.getName()</a></small>}
                        </div>
                        <div class="col-xs-6">
                            <ul id="nav-adventure-list" class="nav nav-pills pull-right nav-adventure-list">
                                @if(auth.canViewAdventureAdventurersWidget()) {
                                    <li class="adventurers active">
                                        <a href="#adventurers" data-toggle="tooltip" data-placement="bottom" title="Adventurers"><i class="fa fa-group" title="Adventurers"></i></a>
                                    </li>
                                }
                                @if(auth.canViewAdventurePlacesWidget()) {
                                    <li class="places @if(adv.getPlaceVoteOpen){active}">
                                        <a href="#places" data-toggle="tooltip" data-placement="bottom" title="Places"><i class="fa fa-globe" title="Place"></i></a>
                                    </li>
                                }
                                @if(auth.canViewAdventureTimeWidget()) {
                                    <li class="times @if(adv.getTimeVoteOpen){active}">
                                        <a href="#times" data-toggle="tooltip" data-placement="bottom" title="Times"><i class="fa fa-calendar" title="Date &amp; Time"></i></a>
                                    </li>
                                }
                                @if(auth.canViewAdventureDiscussionWidget()) {
                                    <li class="discussion emails @if(!adv.getTimeVoteOpen && !adv.getPlaceVoteOpen){active}">
                                        <a href="#discussion" data-toggle="tooltip" data-placement="bottom" title="Discussion"><i class="fa fa-comments-o" title="Discussion"></i></a>
                                            <!--a href="#emails" data-toggle="tooltip" title="Emails"><i class="fa fa-envelope" title="Emails"></i></a-->
                                    </li>
                                }
                                @if(auth.canViewAdventureTodoWidget()) {
                                    <li class="todos files @if(!adv.getTimeVoteOpen && !adv.getPlaceVoteOpen){active}">
                                        <a href="#todos" data-toggle="tooltip" data-placement="bottom" title="Todos"><i class="fa fa-list-ol" title="Todos"></i></a>
                                            <!--a href="#files" data-toggle="tooltip" title="Files"><i class="fa fa-file" title="Files"></i></a-->
                                    </li>
                                }
                                @*<li class="offers"><a href="#offers"><i class="fa fa-suitcase" title="Offers"></i></a></li>*@
                            </ul>
                            <div class="nav-title pull-right"><strong>Go to</strong></div>
                        </div>
                </div>

                <div class="prime-image">
                    <div id="adventure-prime-image" style="width: 100%; height: 200px;">
                    </div>

                    <div class="title-overlay">
                        @*
                        <span class="title-name visible-xs">
                            <i class="fa fa-info white"></i>
                            <a href="#" id="adventureName" data-type="text" data-pk="@adv.getId()"
                                data-url="@html.routes.AdventureController.saveEditable()"
                                data-original-title="Enter adventure name" data-inputclass="form-control input-lg">@adv.getName()</a><i class="fa fa-pencil white muted"></i> <span></span>
                            @if(ins != null) {<small>- <a href="@html.routes.InspirationController.get(ins.getId)">@ins.getName()</a></small>}
                        </span>
                        *@

                        <div class="toolbar pull-right">
                            <a id="adventure-prime-image-upload-button" class="btn btn-default btn-upload"><i class="fa fa-picture-o"></i></a>
                        </div>
                    </div>

                </div>



                <div class="jrn-container jrn-no-top-round jrn-no-top-gap">
                    @index(adv, ins)
                </div>

                @if(auth.canViewAdventureAdventurersWidget()) {
                <div class="jrn-adventure-section">
                     <div class="jrn-container jrn-no-bottom-round">

                        <h2 id="adventurers"><i class="fa fa-group icon-for-adventure-title"></i> @Messages("adventure.getScala.adventurers.title")</h2>
                        <div class="row">
                            <div class="col-lg-12">
                                <p class="lead">@Messages("adventure.getScala.adventurers.subtitle")</p>
                                @adventurers(adv, advr)
                            </div>
                        </div>
                    </div>
                    @if(auth.canViewAdventurerComments()) {
                        @comment.widget_comment(adv.getId + "_adventurers", user)
                    }
                    <hr/>
                </div>
                }

                @if(auth.canViewAdventurePlacesWidget()) {
                <div class="jrn-adventure-section @if(!adv.getPlaceVoteOpen){stash}">
                    <div class="jrn-container jrn-no-bottom-round">
                        <h2 id="places"><i class="fa fa-globe icon-for-adventure-title"></i> @Messages("adventure.getScala.place.title")</h2>
                        <div class="row">
                            <div class="col-lg-12">
                                <p class="lead">@Messages("adventure.getScala.place.subtitle")</p>

                                @places(adv)

                            </div>
                        </div>
                    </div>
                    @if(auth.canViewPlaceComments()) {
                        @comment.widget_comment(adv.getId + "_places", user)
                    }
                    <hr/>
                </div>
                }

                @if(auth.canViewAdventureTimeWidget()) {
                <div class="jrn-adventure-section @if(!adv.getTimeVoteOpen){stash}">
                    <div class="jrn-container jrn-no-bottom-round">
                        <h2 id="times"><i class="fa fa-calendar icon-for-adventure-title"></i> @Messages("adventure.getScala.time.title")</h2>
                        <div class="row">
                            <div class="col-lg-12">
                                <p class="lead">@Messages("adventure.getScala.time.subtitle")</p>

                                @times(adv)

                            </div>
                        </div>
                    </div>
                    @if(auth.canViewDateAndTimeComments()) {
                        @comment.widget_comment(adv.getId + "_times", user)
                    }
               </div>
                }

                @if(auth.canViewAdventureDiscussionWidget()) {
                @*
                <div class="jrn-adventure-section stash">
                    <div class="jrn-container">

                        <h2 id="discussion-wall"><i class="fa fa-comments fa fa-for-adventure-title"></i> @Messages("adventure.getScala.discussion.title")</h2>
                        <div class="row">
                            <div class="col-lg-12">
                            @comment.widget_wall(adv.getId + "_discussion")
                            </div>
                        </div>
                    </div>

                    <hr/>
                </div>

                <div class="jrn-adventure-section stash">
                    <div class="jrn-container">
                        <h2 id="emails"><i class="fa fa-envelope icon-for-adventure-title"></i>
                            Emails<div class="pull-right"><button class="btn btn-success btn-emails-refresh"><i class="fa fa-refresh"></i></button></div></h2>
                        <div class="row">
                            <div class="col-lg-12">
                                <p class="lead">
                                    Eure eigene Emailadresse f√ºr dieses JournWe! Sendet und empfangt Emails gemeinsam.</p>

                                @emails(adv)

                            </div>
                        </div>
                    </div>
                </div>
                *@

                <div class="jrn-adventure-section @if(adv.getTimeVoteOpen || adv.getPlaceVoteOpen){stash}">
                    <div class="jrn-container">
                        <h2 id="discussion"><i class="fa fa-comments-o icon-for-adventure-title"></i>
                            Discussion

                            <div class="pull-right clearfix">
                                <button class="btn btn-success btn-timeline-refresh btn-emails-refresh btn-files-refresh pull-right"><i class="fa fa-refresh"></i></button>
                                <ul class="nav nav-pills nav-discussion pull-right">
                                    <li class="active"><a class="btn btn-default btn-timeline-filter-all" href="#discussion-timeline" data-toggle="tab"><i class="fa fa-comments-o fa-fw"></i></a></li>
                                    <li><a class="btn btn-default" href="#discussion-emails" data-toggle="tab"><i class="fa fa-envelope-o fa-fw"></i></a></li>
                                    <li><a class="btn btn-default" href="#discussion-files" data-toggle="tab"><i class="fa fa-file-o"></i></a></li>
                                    <li><a class="btn btn-default btn-timeline-filter-logs" href="#discussion-timeline" data-toggle="tab"><i class="fa fa-list fa-fw"></i></a></li>
                                    <li><a class="btn btn-default btn-timeline-filter-comments" href="#discussion-timeline" data-toggle="tab"><i class="fa fa-comment fa-fw"></i></a></li>
                                </ul>
                            </div>
                        </h2>
                        <div class="row">
                            <div class="col-lg-12">
                                @timeline(adv, user)
                            </div>
                        </div>
                    </div>
                </div>
                }

                @if(auth.canViewAdventureTodoWidget()) {
                <div class="jrn-adventure-section @if(adv.getTimeVoteOpen || adv.getPlaceVoteOpen){stash}">
                    <div class="jrn-container jrn-no-bottom-round">
                        <h2 id="todos"><i class="fa fa-list-ol fa fa-for-adventure-title"></i> @Messages("adventure.getScala.todo.title")<div class="pull-right"><button id="todos-button-refresh" class="btn btn-success"><i class="fa fa-refresh"></i></button></div></h2>
                        <div class="row">
                            <div class="col-lg-12">
                                <p class="lead">@Messages("adventure.getScala.todo.subtitle")</p>

                                @todos(adv, advr)

                            </div>
                        </div>
                    </div>
                    @if(auth.canViewTodoComments()) {
                        @comment.widget_comment(adv.getId + "_todos", user)
                    }
                    <hr/>
                </div>
                }

                @if(auth.canViewAdventureFilesWidget() && false) {
                    @*
                    <div class="jrn-container jrn-no-bottom-round">
                        <h2 id="files"><i class="fa fa-file fa fa-for-adventure-title"></i> @Messages("adventure.getScala.files.title")<div class="pull-right"><button class="btn btn-success btn-files-refresh"><i class="fa fa-refresh"></i></button></div></h2>
                        <div class="row">
                            <div class="col-lg-12">
                                <p class="lead">@Messages("adventure.getScala.files.subtitle")</p>

                                @files(adv)

                            </div>
                        </div>
                    </div>
                    <div style="position: relative; display: block; padding-right: 20px; background: white; margin: 1px 0;">
                        <div class="row"><small class="pull-right"><a href="http://www.entouragebox.com" target="_blank"><img src="http://www.entouragebox.com/img/logo.png" style="max-height: 30px;"></a></small></div>
                    </div>
                    @if(auth.canViewFilesComments()) {
                        @comment.widget_comment(adv.getId + "_files", user)
                    }
                    <hr/>
                    *@
                }

            <div class="jrn-container jrn-opacity">
                <h2><i class="fa fa-wrench"></i> Actions</h2>
                @options(adv, advr)
            </div>

            @*
            @if(auth.canViewAdventureOffersWidget()) {
            <div class="jrn-container jrn-no-bottom-round">
            <h2 id="offers"><i class="fa fa-suitcase icon-for-adventure-title"></i> @Messages("adventure.getScala.offers.title")</h2>
            <div class="row">
            <div class="col-lg-12">
            <p class="lead">@Messages("adventure.getScala.offers.subtitle")</p>

            <table class="table table-striped table-hover">
            <thead>
            <tr><th>Time Option</th><th>Place Option</th><th><i class="fa fa-plane"></i> Cheap Flights</th><th><i class="fa fa-building"></i> Cheap Hotels</th></tr>
            </thead>
            <tbody>
            <tr><td>13.9.2013 - 19.9.2013</td><td>Berlin, Deutschland</td><td>LH 419, FRA - BER</td><td>NH Hotel Berlin City West</td></tr>
            </tbody>
            </table>

            </div>
            </div>
            </div>
            @if(auth.canViewOfferComments()) {
            @comment.widget_comment(adv.getId + "offers", user)
            }
            }
            *@
        }


        <div id="amazon-affiliate" class="modal fade in" tabindex="-1" role="dialog" style="color : black ;">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                        <h3 class="modal-title"> @Messages("adventure.todos.amazon.title") </h3>
                    </div>
                    <div class="modal-body"><div class="affiliate-loading loader"></div> <ul class="content media-list"></ul></div>
                    <div class="modal-footer">
                        <button class="btn btn-default" data-dismiss="modal">@Messages("adventure.general.button.close")</button>
                    </div>
                </div>
            </div>
        </div>

        @cloneAdventure(adv, new DynamicForm())

        @createPDF(adv, new DynamicForm())


        <div id="upload-progress" class="modal fade in" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title"><i class="fa fa-cloud-upload"></i> Uploading</h3>
                    </div>
                    <div class="modal-body">
                        <div class="progress progress-striped active">
                            <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%;"></div>
                        </div>
                    </div>
                    <div class="modal-footer">
                        <small class="pull-right"><a href="http://www.entouragebox.com" target="_blank"><img src="http://www.entouragebox.com/img/logo.png" style="max-height: 30px;"></a></small>
                    </div>
                </div>
            </div>
        </div>

        <div id="email-modal" class="modal fade in" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title"><i class="fa fa-envelope-o"></i> <span class="email-title"></span></h3>
                    </div>
                    <div class="modal-body"><pre><span class="email-body"></span></pre></div>
                    <div class="modal-footer">
                        <a class="btn btn-default" data-dismiss="modal">@Messages("adventure.general.button.close")</a>
                    </div>
                </div>
            </div>
        </div>

        <div id="leave" class="modal fade in" tabindex="-1" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <h3 class="modal-title"><i class="fa fa-unlink"></i> @Messages("adventure.general.leaveconfirm") @adv.getName()
                            ?</h3>
                    </div>
                    <div class="modal-body"><p class="lead">@Messages("adventure.general.leaveconfirm") @adv.getName()
                        ?</p></div>
                    <div class="modal-footer">
                        <a class="btn btn-danger" href="@html.routes.AdventurePeopleController.leave(adv.getId())">@Messages("adventure.general.button.leave")</a>
                        <a class="btn btn-default" data-dismiss="modal">@Messages("adventure.general.button.cancel")</a>
                    </div>
                </div>
            </div>
        </div>

    </div>

        <script type="text/javascript">
        define("adventureData", [ ], @{
            Html(Json.toJson(adv).toString())
        });
        define("adventurerData", [ ], @{
            Html(Json.toJson(advr).toString())
        });
        </script>
        <script src="@routes.Assets.at("javascripts/module/adventure.js").url" type="text/javascript"></script>


    }
